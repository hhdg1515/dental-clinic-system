function escapeHtml(t){if(null==t)return"";const e=document.createElement("div");return e.textContent=String(t),e.innerHTML}class DentalChart{constructor(t,e={}){this.container=document.getElementById(t),this.mode=e.mode||"view",this.teethData=e.teethData||{},this.selectedTooth=null,this.onToothSelect=e.onToothSelect||(()=>{}),this.statusColors={healthy:"#10b981",monitor:"#f59e0b",cavity:"#ef4444",filled:"#3b82f6",missing:"#6b7280",implant:"#8b5cf6","root-canal":"#f97316","post-op":"#06b6d4",urgent:"#dc2626"},this.init()}init(){this.container&&(this.render(),this.attachEventListeners())}render(){const t=this.generateHTML();this.container.innerHTML=t}generateHTML(){return`\n            <div class="dental-chart-wrapper">\n                <div class="chart-title">Dental Chart - Universal System (1-32)</div>\n\n                <div class="chart-quadrants">\n                    \x3c!-- Upper Right --\x3e\n                    <div class="quadrant quadrant-ur">\n                        <div class="quadrant-label">UR (1-8)</div>\n                        <div class="teeth-row">\n                            ${this.generateToothButtons([8,7,6,5,4,3,2,1])}\n                        </div>\n                    </div>\n\n                    \x3c!-- Upper Left --\x3e\n                    <div class="quadrant quadrant-ul">\n                        <div class="quadrant-label">UL (9-16)</div>\n                        <div class="teeth-row">\n                            ${this.generateToothButtons([9,10,11,12,13,14,15,16])}\n                        </div>\n                    </div>\n\n                    \x3c!-- Lower Left --\x3e\n                    <div class="quadrant quadrant-ll">\n                        <div class="quadrant-label">LL (17-24)</div>\n                        <div class="teeth-row">\n                            ${this.generateToothButtons([24,23,22,21,20,19,18,17])}\n                        </div>\n                    </div>\n\n                    \x3c!-- Lower Right --\x3e\n                    <div class="quadrant quadrant-lr">\n                        <div class="quadrant-label">LR (25-32)</div>\n                        <div class="teeth-row">\n                            ${this.generateToothButtons([25,26,27,28,29,30,31,32])}\n                        </div>\n                    </div>\n                </div>\n\n                <div class="legend">\n                    <div class="legend-title">Status:</div>\n                    <div class="legend-items">\n                        ${this.generateLegend()}\n                    </div>\n                </div>\n            </div>\n        `}generateToothButtons(t){return t.map(t=>{const e=this.teethData[t.toString()]||{status:"healthy",treatments:[]},n=["healthy","monitor","cavity","filled","missing","implant","root-canal","post-op","urgent"].includes(e.status)?e.status:"healthy",a=this.statusColors[n],s=e.treatments?e.treatments.length:0,o=n&&"healthy"!==n;return`\n                <button class="tooth-btn"\n                        data-tooth="${t}"\n                        title="${t}: ${escapeHtml(n)}${s>0?` (${s} treatments)`:""}">\n                    <span class="tooth-number">${t}</span>\n                    ${o?`<span class="status-dot" style="background-color: ${a};"></span>`:""}\n                    ${s>0?`<span class="treatment-badge">${s}</span>`:""}\n                </button>\n            `}).join("")}generateLegend(){return Object.entries(this.statusColors).map(([t,e])=>"healthy"===t||"urgent"===t?"":`\n                <div class="legend-item">\n                    <div class="legend-color" style="background-color: ${e};"></div>\n                    <span>${t}</span>\n                </div>\n            `).join("")}attachEventListeners(){this.container.querySelectorAll(".tooth-btn").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const n=parseInt(t.dataset.tooth);this.selectTooth(n)})})}selectTooth(t){this.container.querySelectorAll(".tooth-btn").forEach(t=>{t.classList.remove("selected")});const e=this.container.querySelector(`[data-tooth="${t}"]`);e&&(e.classList.add("selected"),this.selectedTooth=t,this.onToothSelect(t,this.teethData[t.toString()]||{}))}updateToothData(t,e){this.teethData[t.toString()]=e;const n=this.container.querySelector(`[data-tooth="${t}"]`);if(n){const a=["healthy","monitor","cavity","filled","missing","implant","root-canal","post-op","urgent"].includes(e.status)?e.status:"healthy",s=this.statusColors[a];n.title=`${t}: ${a}`;let o=n.querySelector(".status-dot");"healthy"===a?o&&o.remove():(o||(o=document.createElement("span"),o.className="status-dot",n.appendChild(o)),o.style.backgroundColor=s);const i=e.treatments?e.treatments.length:0;if(i>0){let t=n.querySelector(".treatment-badge");t||(t=document.createElement("span"),t.className="treatment-badge",n.appendChild(t)),t.textContent=i}else{const t=n.querySelector(".treatment-badge");t&&t.remove()}}}getSelectedTooth(){return this.selectedTooth}getToothData(t){return this.teethData[t.toString()]||null}setAllTeethData(t){this.teethData=t,this.render(),this.attachEventListeners()}}"undefined"!=typeof window&&(window.DentalChart=DentalChart);