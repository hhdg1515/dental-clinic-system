export function escapeHtml(e){if(null==e)return"";const t=document.createElement("div");return t.textContent=String(e),t.innerHTML}export function safeSetText(e,t){e.textContent=t||""}export function createSafeElement(e,t="",n=""){const r=document.createElement(e);return r.textContent=t,n&&(r.className=n),r}export function safeHtml(e,...t){let n="";return e.forEach((e,r)=>{if(n+=e,r<t.length){const e=t[r];if("object"!=typeof e||null===e||Array.isArray(e))n+=escapeHtml(e);else{const t=Object.keys(e)[0];n+=escapeHtml(e[t])}}}),n}export function sanitizeUrl(e,t="#"){if(!e)return t;const n=String(e).toLowerCase().trim();return n.startsWith("javascript:")||n.startsWith("data:")||n.startsWith("vbscript:")?t:e}export function safeAppendChildren(e,t){e.textContent="";(Array.isArray(t)?t:[t]).forEach(t=>{t instanceof HTMLElement&&e.appendChild(t)})}export function createAppointmentCard(e){const t=document.createElement("div");t.className="appointment-card";const n=document.createElement("h3");n.textContent=e.patientName||"未命名患者";const r=document.createElement("p");r.textContent=`电话: ${e.patientPhone||"无"}`;const a=document.createElement("p");a.textContent=`诊所: ${e.clinicLocation||"未知"}`;const c=document.createElement("p");return c.textContent=`日期: ${e.appointmentDate||"未设置"}`,t.appendChild(n),t.appendChild(r),t.appendChild(a),t.appendChild(c),t}export function createMessageElement(e,t="info"){const n=document.createElement("div");n.className=`message message-${t}`;const r=document.createElement("i");r.className="success"===t?"fas fa-check-circle":"error"===t?"fas fa-exclamation-circle":"warning"===t?"fas fa-exclamation-triangle":"fas fa-info-circle";const a=document.createElement("span");return a.textContent=e,n.appendChild(r),n.appendChild(a),n}export function validateInput(e){if(!e)return!0;return![/<script/i,/javascript:/i,/on\w+\s*=/i,/<iframe/i,/<object/i,/<embed/i,/eval\(/i].some(t=>t.test(e))}export function sanitizeString(e,t=1e3){if(!e)return"";let n=String(e).trim();return n=n.replace(/\0/g,""),n.length>t&&(n=n.substring(0,t)),n}