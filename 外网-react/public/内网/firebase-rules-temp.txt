rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // 允许认证用户读写自己的数据
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }

    // 临时允许所有用户读写预约数据（开发阶段）
    match /appointments/{appointmentId} {
      allow read, write: if true;
    }

    // 添加取消预约的权限
    match /cancelledAppointments/{path=**} {
      allow read, write: if true;
    }

    // 添加待确认预约的权限
    match /pendingConfirmations/{confirmationId} {
      allow read, write: if true;
    }

    // 添加患者档案的权限
    match /patientProfiles/{patientId} {
      allow read, write: if true;
    }
  }
}